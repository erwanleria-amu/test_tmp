<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="noindex,nofollow" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Symfony Profiler</title>
        <link rel="icon" type="image/x-icon" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFEUlEQVR4AZVXA4wm2RMf27bXDM/+3/+sYBGfrbVtezc6BWtzfPbYXtvDL9906t6v0vWl05me7q1JzXuvvu4yXnvZgJ9hH6bwZYXLFR739vauUGuDwhq1L1N4Uv/tRYUhFjwcg49hn6aYr1V4TiGp86CoP9Oh1tV414KnM6t9fHymKUZ3DAI0hW4b1AyK3lE8phh5OxWeoJgUGhi5mLm95YzBwcHuhIQEV1JSEoWGhoKWHxYWFmenhJ/B5W0GwZpDt5Ovry9lZWWRyWOu5ORk7JsUpogsq5gnmISTU+HKQoLFQv/qq6/os88+I+EVFRUlSsRZ5oRiVmwlXMWShQkahUdERJCfnx/vd+3aRTU1NXTixAmqrq6mK1eu0PTp05mnrmD+QK6XhLO0XP2O2FJAQICRjjMU4P1PP/1EfX19NGfOHM8Z0N7ezueQkBBXYGAgSWIaQ5Em2T5QzFNSUig9PV3OHOe4uDjZ87p//34C7Nm7x/NcRUUFAX799Vec8Y7m7+8Pz92SfBDXr7VwPYRbxn/MmDG8Tps2jQBd3V30/PPPe35/6qmnaPXq1TR69Gg+h4eHiwwosdLT4dBkQDSXWmJiIq/vv/8+/fvvv3ThwgWqr6+n/Px8oyCmAerq6jy03Nxc2Yv7ySSjQzrmi4i92fVpaWlYOZ79/f2MW7dtpSlTptDp06epo6ODPvroI850ASiGdyZOnEjXrl2jyspKT4XA9cgjkaPL/D8UWG62HokieyQQoKSkRGiMs2bNotraWmprayOBNWvWyO+scGdnp5zF/WYvLEb8TwpRykp1MV7feust6uzqJMD169fpueeeY/rDDz/MKzzgdrsJoGkaffvtt/TFF19wQsIDmzZtssojt+6Fo1CgzKiAvAB3DRs2jAULtLS0eErPGB5Ad3c3lZaWUnFxMfeAd955h5+JjY3FaqXAPwhBnRCNySK4b98+Aoilv/z6i/zGggSk1g0opWupAMvGP91yt96zadWqVdTc3Ezz58/31LOAy+US6zgHBP766y+mDR8+HBUgFWSnQI2EAFnqlpcaGxsJIFkMN8L9AnPnzmX6jRs3SACeAi0vL888JwYPgTEJpauhnADo6/LSgQMHCHD37l2Cp15//XXq7eslgKb+Fi1exM9lZmbaCDclIcpQQhATE4OVsrOzuamg+cyePZuzG64Hrlu3jp9ZuWolCdy+fZueeOIJpkdHR1sLHqgM0Yh0bTRz1m7fvp2KiopYkYKCApo8ebLZIwzlFeXSOXEnsLPe2Ij+p5DbYYdOdOtDQ0rNjFya5sTcsGGDcTDZoXTcNoVBMoxWyzDS2yXmOyeUtGSskmDjx4/nRgPAfBDmMpZtUIbRcsi2GsfSD2QYyd2OcdmyZSSwdu1apuXk5GB16v4bak0yX0imyIUEgwNovFTglhMZGcm0srIy43zAVUxuTLbW4xn17Fci23wly9dngUummrTaixcvMpOtW7fiiBwQpqKYU9efHuxDJE5hC9wvL9TW1RLg+PHjPGTQ8wsLC4WpDC5Y5UR4k5qKMSLT6lqeAiX0nuAaMmSI9sMPP9CZM2foyJEj9O677wpTVIuTjidNp0HibvttoH9E5OMqbWKkSaNSlojldoLF7TEP+nUEmKI62y1kOBINbVaNarcI0PuGGUlHyfYvLHg7/jhFSFYqZh0P8KHSptd5ksOPU3tvqAEUot/hFmOIYJLp87wGe9Dwm95eg5xa/R8G6d8U5EcFhwAAAABJRU5ErkJggg==">

            <style>
        
html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0;font-size:2em}mark{color:#000;background:#ff0}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{height:0;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{padding:.35em .625em .75em;margin:0 2px;border:1px solid silver}legend{padding:0;border:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}

html, body  {
    height: 100%;
    width: 100%;
}
body {
    background-color: #F9F9F9;
    color: #aaa;
    display: flex;
    flex-direction: column;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.4;
}
.header {
    background-color: #222;
    position: fixed;
    top: 0;
    display: flex;
    width: 100%;
}
.header h1 {
    color: #FFF;
    font-weight: normal;
    font-size: 21px;
    margin: 0;
    padding: 10px 10px 8px;
    word-break: break-all;
}

a.doc {
    color: #FFF;
    text-decoration: none;
    margin: auto;
    margin-right: 10px;
}

a.doc:hover {
    text-decoration: underline;
}

.source {
    margin-top: 41px;
}

.source li code {
    color: #555;
}

.source li.selected {
    background: rgba(255, 255, 153, 0.5);
}

.anchor {
    position: relative;
    display: inline-block;
    top: -7em;
    visibility: hidden;
}

    </style>
    </head>
    <body>
        <div class="header">
    <h1>vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/Entity/BasicEntityPersister.php <small>line 712</small></h1>
    <a class="doc" href="https://symfony.com/doc/3.4.15/reference/configuration/framework.html#ide" rel="help">Open in your IDE?</a>
</div>
<div class="source">
    <ol start="1"><li><a class="anchor" name="line1"></a><code><span style="color: #0000BB">&lt;?php</span></span></code></li>
<li><a class="anchor" name="line2"></a><code><span style="color: #0000BB"></span><span style="color: #FF8000">/*</span></span></code></li>
<li><a class="anchor" name="line3"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;THIS&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;BY&nbsp;THE&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;AND&nbsp;CONTRIBUTORS</span></span></code></li>
<li><a class="anchor" name="line4"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;"AS&nbsp;IS"&nbsp;AND&nbsp;ANY&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED&nbsp;WARRANTIES,&nbsp;INCLUDING,&nbsp;BUT&nbsp;NOT</span></span></code></li>
<li><a class="anchor" name="line5"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;LIMITED&nbsp;TO,&nbsp;THE&nbsp;IMPLIED&nbsp;WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY&nbsp;AND&nbsp;FITNESS&nbsp;FOR</span></span></code></li>
<li><a class="anchor" name="line6"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;ARE&nbsp;DISCLAIMED.&nbsp;IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;THE&nbsp;COPYRIGHT</span></span></code></li>
<li><a class="anchor" name="line7"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;OWNER&nbsp;OR&nbsp;CONTRIBUTORS&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY&nbsp;DIRECT,&nbsp;INDIRECT,&nbsp;INCIDENTAL,</span></span></code></li>
<li><a class="anchor" name="line8"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;SPECIAL,&nbsp;EXEMPLARY,&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES&nbsp;(INCLUDING,&nbsp;BUT&nbsp;NOT</span></span></code></li>
<li><a class="anchor" name="line9"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;LIMITED&nbsp;TO,&nbsp;PROCUREMENT&nbsp;OF&nbsp;SUBSTITUTE&nbsp;GOODS&nbsp;OR&nbsp;SERVICES;&nbsp;LOSS&nbsp;OF&nbsp;USE,</span></span></code></li>
<li><a class="anchor" name="line10"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;DATA,&nbsp;OR&nbsp;PROFITS;&nbsp;OR&nbsp;BUSINESS&nbsp;INTERRUPTION)&nbsp;HOWEVER&nbsp;CAUSED&nbsp;AND&nbsp;ON&nbsp;ANY</span></span></code></li>
<li><a class="anchor" name="line11"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;THEORY&nbsp;OF&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;CONTRACT,&nbsp;STRICT&nbsp;LIABILITY,&nbsp;OR&nbsp;TORT</span></span></code></li>
<li><a class="anchor" name="line12"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;(INCLUDING&nbsp;NEGLIGENCE&nbsp;OR&nbsp;OTHERWISE)&nbsp;ARISING&nbsp;IN&nbsp;ANY&nbsp;WAY&nbsp;OUT&nbsp;OF&nbsp;THE&nbsp;USE</span></span></code></li>
<li><a class="anchor" name="line13"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;OF&nbsp;THIS&nbsp;SOFTWARE,&nbsp;EVEN&nbsp;IF&nbsp;ADVISED&nbsp;OF&nbsp;THE&nbsp;POSSIBILITY&nbsp;OF&nbsp;SUCH&nbsp;DAMAGE.</span></span></code></li>
<li><a class="anchor" name="line14"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line15"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;This&nbsp;software&nbsp;consists&nbsp;of&nbsp;voluntary&nbsp;contributions&nbsp;made&nbsp;by&nbsp;many&nbsp;individuals</span></span></code></li>
<li><a class="anchor" name="line16"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;and&nbsp;is&nbsp;licensed&nbsp;under&nbsp;the&nbsp;MIT&nbsp;license.&nbsp;For&nbsp;more&nbsp;information,&nbsp;see</span></span></code></li>
<li><a class="anchor" name="line17"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&lt;http://www.doctrine-project.org&gt;.</span></span></code></li>
<li><a class="anchor" name="line18"></a><code><span style="color: #FF8000">&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line19"></a><code><span style="color: #FF8000"></span></span></code></li>
<li><a class="anchor" name="line20"></a><code><span style="color: #FF8000"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Persisters</span><span style="color: #007700">\</span><span style="color: #0000BB">Entity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line21"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line22"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">Common</span><span style="color: #007700">\</span><span style="color: #0000BB">Collections</span><span style="color: #007700">\</span><span style="color: #0000BB">Criteria</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line23"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">Common</span><span style="color: #007700">\</span><span style="color: #0000BB">Collections</span><span style="color: #007700">\</span><span style="color: #0000BB">Expr</span><span style="color: #007700">\</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line24"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">Common</span><span style="color: #007700">\</span><span style="color: #0000BB">Util</span><span style="color: #007700">\</span><span style="color: #0000BB">ClassUtils</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line25"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">DBAL</span><span style="color: #007700">\</span><span style="color: #0000BB">Connection</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line26"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">DBAL</span><span style="color: #007700">\</span><span style="color: #0000BB">LockMode</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line27"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">DBAL</span><span style="color: #007700">\</span><span style="color: #0000BB">Types</span><span style="color: #007700">\</span><span style="color: #0000BB">Type</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line28"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">EntityManagerInterface</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line29"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Mapping</span><span style="color: #007700">\</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line30"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Mapping</span><span style="color: #007700">\</span><span style="color: #0000BB">MappingException</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line31"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">OptimisticLockException</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line32"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line33"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">PersistentCollection</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line34"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Persisters</span><span style="color: #007700">\</span><span style="color: #0000BB">SqlExpressionVisitor</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line35"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Persisters</span><span style="color: #007700">\</span><span style="color: #0000BB">SqlValueVisitor</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line36"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line37"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">UnitOfWork</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line38"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Utility</span><span style="color: #007700">\</span><span style="color: #0000BB">IdentifierFlattener</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line39"></a><code><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Doctrine</span><span style="color: #007700">\</span><span style="color: #0000BB">ORM</span><span style="color: #007700">\</span><span style="color: #0000BB">Utility</span><span style="color: #007700">\</span><span style="color: #0000BB">PersisterHelper</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line40"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line41"></a><code><span style="color: #007700"></span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line42"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;A&nbsp;BasicEntityPersister&nbsp;maps&nbsp;an&nbsp;entity&nbsp;to&nbsp;a&nbsp;single&nbsp;table&nbsp;in&nbsp;a&nbsp;relational&nbsp;database.</span></span></code></li>
<li><a class="anchor" name="line43"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line44"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;A&nbsp;persister&nbsp;is&nbsp;always&nbsp;responsible&nbsp;for&nbsp;a&nbsp;single&nbsp;entity&nbsp;type.</span></span></code></li>
<li><a class="anchor" name="line45"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line46"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;EntityPersisters&nbsp;are&nbsp;used&nbsp;during&nbsp;a&nbsp;UnitOfWork&nbsp;to&nbsp;apply&nbsp;any&nbsp;changes&nbsp;to&nbsp;the&nbsp;persistent</span></span></code></li>
<li><a class="anchor" name="line47"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;state&nbsp;of&nbsp;entities&nbsp;onto&nbsp;a&nbsp;relational&nbsp;database&nbsp;when&nbsp;the&nbsp;UnitOfWork&nbsp;is&nbsp;committed,</span></span></code></li>
<li><a class="anchor" name="line48"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;as&nbsp;well&nbsp;as&nbsp;for&nbsp;basic&nbsp;querying&nbsp;of&nbsp;entities&nbsp;and&nbsp;their&nbsp;associations&nbsp;(not&nbsp;DQL).</span></span></code></li>
<li><a class="anchor" name="line49"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line50"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;The&nbsp;persisting&nbsp;operations&nbsp;that&nbsp;are&nbsp;invoked&nbsp;during&nbsp;a&nbsp;commit&nbsp;of&nbsp;a&nbsp;UnitOfWork&nbsp;to</span></span></code></li>
<li><a class="anchor" name="line51"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;persist&nbsp;the&nbsp;persistent&nbsp;entity&nbsp;state&nbsp;are:</span></span></code></li>
<li><a class="anchor" name="line52"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line53"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;addInsert}&nbsp;:&nbsp;To&nbsp;schedule&nbsp;an&nbsp;entity&nbsp;for&nbsp;insertion.</span></span></code></li>
<li><a class="anchor" name="line54"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;executeInserts}&nbsp;:&nbsp;To&nbsp;execute&nbsp;all&nbsp;scheduled&nbsp;insertions.</span></span></code></li>
<li><a class="anchor" name="line55"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;update}&nbsp;:&nbsp;To&nbsp;update&nbsp;the&nbsp;persistent&nbsp;state&nbsp;of&nbsp;an&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line56"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;delete}&nbsp;:&nbsp;To&nbsp;delete&nbsp;the&nbsp;persistent&nbsp;state&nbsp;of&nbsp;an&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line57"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line58"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;As&nbsp;can&nbsp;be&nbsp;seen&nbsp;from&nbsp;the&nbsp;above&nbsp;list,&nbsp;insertions&nbsp;are&nbsp;batched&nbsp;and&nbsp;executed&nbsp;all&nbsp;at&nbsp;once</span></span></code></li>
<li><a class="anchor" name="line59"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;for&nbsp;increased&nbsp;efficiency.</span></span></code></li>
<li><a class="anchor" name="line60"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line61"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;The&nbsp;querying&nbsp;operations&nbsp;invoked&nbsp;during&nbsp;a&nbsp;UnitOfWork,&nbsp;either&nbsp;through&nbsp;direct&nbsp;find</span></span></code></li>
<li><a class="anchor" name="line62"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;requests&nbsp;or&nbsp;lazy-loading,&nbsp;are&nbsp;the&nbsp;following:</span></span></code></li>
<li><a class="anchor" name="line63"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line64"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;load}&nbsp;:&nbsp;Loads&nbsp;(the&nbsp;state&nbsp;of)&nbsp;a&nbsp;single,&nbsp;managed&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line65"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;loadAll}&nbsp;:&nbsp;Loads&nbsp;multiple,&nbsp;managed&nbsp;entities.</span></span></code></li>
<li><a class="anchor" name="line66"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;loadOneToOneEntity}&nbsp;:&nbsp;Loads&nbsp;a&nbsp;one/many-to-one&nbsp;entity&nbsp;association&nbsp;(lazy-loading).</span></span></code></li>
<li><a class="anchor" name="line67"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;loadOneToManyCollection}&nbsp;:&nbsp;Loads&nbsp;a&nbsp;one-to-many&nbsp;entity&nbsp;association&nbsp;(lazy-loading).</span></span></code></li>
<li><a class="anchor" name="line68"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;&nbsp;&nbsp;-&nbsp;{@link&nbsp;loadManyToManyCollection}&nbsp;:&nbsp;Loads&nbsp;a&nbsp;many-to-many&nbsp;entity&nbsp;association&nbsp;(lazy-loading).</span></span></code></li>
<li><a class="anchor" name="line69"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line70"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;The&nbsp;BasicEntityPersister&nbsp;implementation&nbsp;provides&nbsp;the&nbsp;default&nbsp;behavior&nbsp;for</span></span></code></li>
<li><a class="anchor" name="line71"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;persisting&nbsp;and&nbsp;querying&nbsp;entities&nbsp;that&nbsp;are&nbsp;mapped&nbsp;to&nbsp;a&nbsp;single&nbsp;database&nbsp;table.</span></span></code></li>
<li><a class="anchor" name="line72"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line73"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;Subclasses&nbsp;can&nbsp;be&nbsp;created&nbsp;to&nbsp;provide&nbsp;custom&nbsp;persisting&nbsp;and&nbsp;querying&nbsp;strategies,</span></span></code></li>
<li><a class="anchor" name="line74"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;i.e.&nbsp;spanning&nbsp;multiple&nbsp;tables.</span></span></code></li>
<li><a class="anchor" name="line75"></a><code><span style="color: #FF8000">&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line76"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Roman&nbsp;Borschel&nbsp;&lt;roman@code-factory.org&gt;</span></span></code></li>
<li><a class="anchor" name="line77"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Giorgio&nbsp;Sironi&nbsp;&lt;piccoloprincipeazzurro@gmail.com&gt;</span></span></code></li>
<li><a class="anchor" name="line78"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Benjamin&nbsp;Eberlei&nbsp;&lt;kontakt@beberlei.de&gt;</span></span></code></li>
<li><a class="anchor" name="line79"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Alexander&nbsp;&lt;iam.asm89@gmail.com&gt;</span></span></code></li>
<li><a class="anchor" name="line80"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Fabio&nbsp;B.&nbsp;Silva&nbsp;&lt;fabio.bat.silva@gmail.com&gt;</span></span></code></li>
<li><a class="anchor" name="line81"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@author&nbsp;Rob&nbsp;Caiger&nbsp;&lt;rob@clocal.co.uk&gt;</span></span></code></li>
<li><a class="anchor" name="line82"></a><code><span style="color: #FF8000">&nbsp;*&nbsp;@since&nbsp;2.0</span></span></code></li>
<li><a class="anchor" name="line83"></a><code><span style="color: #FF8000">&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line84"></a><code><span style="color: #FF8000"></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">BasicEntityPersister&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">EntityPersister</span></span></code></li>
<li><a class="anchor" name="line85"></a><code><span style="color: #0000BB"></span><span style="color: #007700">{</span></span></code></li>
<li><a class="anchor" name="line86"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line87"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line88"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line89"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">static&nbsp;private&nbsp;</span><span style="color: #0000BB">$comparisonMap&nbsp;</span><span style="color: #007700">=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line90"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">EQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'=&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line91"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">IS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'=&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line92"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">NEQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'!=&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line93"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">GT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&gt;&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line94"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">GTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&gt;=&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line95"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">LT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line96"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">LTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;=&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line97"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'IN&nbsp;(%s)'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line98"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">NIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'NOT&nbsp;IN&nbsp;(%s)'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line99"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">CONTAINS&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'LIKE&nbsp;%s'</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line100"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></code></li>
<li><a class="anchor" name="line101"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line102"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line103"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Metadata&nbsp;object&nbsp;that&nbsp;describes&nbsp;the&nbsp;mapping&nbsp;of&nbsp;the&nbsp;mapped&nbsp;entity&nbsp;class.</span></span></code></li>
<li><a class="anchor" name="line104"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line105"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;\Doctrine\ORM\Mapping\ClassMetadata</span></span></code></li>
<li><a class="anchor" name="line106"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line107"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line108"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line109"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line110"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;underlying&nbsp;DBAL&nbsp;Connection&nbsp;of&nbsp;the&nbsp;used&nbsp;EntityManager.</span></span></code></li>
<li><a class="anchor" name="line111"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line112"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;\Doctrine\DBAL\Connection&nbsp;$conn</span></span></code></li>
<li><a class="anchor" name="line113"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line114"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line115"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line116"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line117"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;database&nbsp;platform.</span></span></code></li>
<li><a class="anchor" name="line118"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line119"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;\Doctrine\DBAL\Platforms\AbstractPlatform</span></span></code></li>
<li><a class="anchor" name="line120"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line121"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$platform</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line122"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line123"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line124"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;EntityManager&nbsp;instance.</span></span></code></li>
<li><a class="anchor" name="line125"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line126"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;EntityManagerInterface</span></span></code></li>
<li><a class="anchor" name="line127"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line128"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$em</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line129"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line130"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line131"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Queued&nbsp;inserts.</span></span></code></li>
<li><a class="anchor" name="line132"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line133"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line134"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line135"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$queuedInserts&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line136"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line137"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line138"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;map&nbsp;of&nbsp;column&nbsp;names&nbsp;to&nbsp;DBAL&nbsp;mapping&nbsp;types&nbsp;of&nbsp;all&nbsp;prepared&nbsp;columns&nbsp;used</span></span></code></li>
<li><a class="anchor" name="line139"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;when&nbsp;INSERTing&nbsp;or&nbsp;UPDATEing&nbsp;an&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line140"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line141"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line142"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line143"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;prepareInsertData($entity)</span></span></code></li>
<li><a class="anchor" name="line144"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;prepareUpdateData($entity)</span></span></code></li>
<li><a class="anchor" name="line145"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line146"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$columnTypes&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line147"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line148"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line149"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;map&nbsp;of&nbsp;quoted&nbsp;column&nbsp;names.</span></span></code></li>
<li><a class="anchor" name="line150"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line151"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line152"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line153"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;prepareInsertData($entity)</span></span></code></li>
<li><a class="anchor" name="line154"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;prepareUpdateData($entity)</span></span></code></li>
<li><a class="anchor" name="line155"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line156"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$quotedColumns&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line157"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line158"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line159"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;INSERT&nbsp;SQL&nbsp;statement&nbsp;used&nbsp;for&nbsp;entities&nbsp;handled&nbsp;by&nbsp;this&nbsp;persister.</span></span></code></li>
<li><a class="anchor" name="line160"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;SQL&nbsp;is&nbsp;only&nbsp;generated&nbsp;once&nbsp;per&nbsp;request,&nbsp;if&nbsp;at&nbsp;all.</span></span></code></li>
<li><a class="anchor" name="line161"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line162"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line163"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line164"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$insertSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line165"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line166"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line167"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;quote&nbsp;strategy.</span></span></code></li>
<li><a class="anchor" name="line168"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line169"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;\Doctrine\ORM\Mapping\QuoteStrategy</span></span></code></li>
<li><a class="anchor" name="line170"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line171"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$quoteStrategy</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line172"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line173"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line174"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;IdentifierFlattener&nbsp;used&nbsp;for&nbsp;manipulating&nbsp;identifiers</span></span></code></li>
<li><a class="anchor" name="line175"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line176"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;\Doctrine\ORM\Utility\IdentifierFlattener</span></span></code></li>
<li><a class="anchor" name="line177"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line178"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$identifierFlattener</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line179"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line180"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line181"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;CachedPersisterContext</span></span></code></li>
<li><a class="anchor" name="line182"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line183"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$currentPersisterContext</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line184"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line185"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line186"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;CachedPersisterContext</span></span></code></li>
<li><a class="anchor" name="line187"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line188"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$limitsHandlingContext</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line189"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line190"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line191"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;CachedPersisterContext</span></span></code></li>
<li><a class="anchor" name="line192"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line193"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$noLimitsContext</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line194"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line195"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line196"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Initializes&nbsp;a&nbsp;new&nbsp;&lt;tt&gt;BasicEntityPersister&lt;/tt&gt;&nbsp;that&nbsp;uses&nbsp;the&nbsp;given&nbsp;EntityManager</span></span></code></li>
<li><a class="anchor" name="line197"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;and&nbsp;persists&nbsp;instances&nbsp;of&nbsp;the&nbsp;class&nbsp;described&nbsp;by&nbsp;the&nbsp;given&nbsp;ClassMetadata&nbsp;descriptor.</span></span></code></li>
<li><a class="anchor" name="line198"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line199"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;EntityManagerInterface&nbsp;$em</span></span></code></li>
<li><a class="anchor" name="line200"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;ClassMetadata&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class</span></span></code></li>
<li><a class="anchor" name="line201"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line202"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">EntityManagerInterface&nbsp;$em</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassMetadata&nbsp;$class</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line203"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line204"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$em</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line205"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line206"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getConnection</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line207"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDatabasePlatform</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line208"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getConfiguration</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getQuoteStrategy</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line209"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifierFlattener&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">IdentifierFlattener</span><span style="color: #007700">(</span><span style="color: #0000BB">$em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetadataFactory</span><span style="color: #007700">());</span></span></code></li>
<li><a class="anchor" name="line210"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">noLimitsContext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">CachedPersisterContext</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line211"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line212"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">\</span><span style="color: #0000BB">ResultSetMapping</span><span style="color: #007700">(),</span></span></code></li>
<li><a class="anchor" name="line213"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">false</span></span></code></li>
<li><a class="anchor" name="line214"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line215"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limitsHandlingContext&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">CachedPersisterContext</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line216"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line217"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">\</span><span style="color: #0000BB">ResultSetMapping</span><span style="color: #007700">(),</span></span></code></li>
<li><a class="anchor" name="line218"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">true</span></span></code></li>
<li><a class="anchor" name="line219"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line220"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line221"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line222"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line223"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line224"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line225"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line226"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line227"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line228"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line229"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line230"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line231"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line232"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line233"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getResultSetMapping</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line234"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line235"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line236"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line237"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line238"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line239"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line240"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line241"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">addInsert</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line242"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line243"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts</span><span style="color: #007700">[</span><span style="color: #0000BB">spl_object_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)]&nbsp;=&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line244"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line245"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line246"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line247"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line248"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line249"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getInserts</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line250"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line251"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line252"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line253"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line254"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line255"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line256"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line257"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">executeInserts</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line258"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line259"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line260"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line261"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line262"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line263"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$postInsertIds&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line264"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$idGenerator&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">idGenerator</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line265"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isPostInsertId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$idGenerator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isPostInsertGenerator</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line266"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line267"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertSQL</span><span style="color: #007700">());</span></span></code></li>
<li><a class="anchor" name="line268"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line269"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line270"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line271"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$insertData&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepareInsertData</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line272"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line273"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$insertData</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line274"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$paramIndex&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line275"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line276"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$insertData</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line277"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$paramIndex</span><span style="color: #007700">++,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$column</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line278"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line279"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line280"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line281"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line282"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line283"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$isPostInsertId</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line284"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$generatedId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$idGenerator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generate</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line285"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line286"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$generatedId</span></span></code></li>
<li><a class="anchor" name="line287"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line288"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$postInsertIds</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line289"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'generatedId'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$generatedId</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line290"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'entity'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line291"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></code></li>
<li><a class="anchor" name="line292"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line293"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIdentifierValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line294"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line295"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line296"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isVersioned</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line297"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">assignDefaultVersionValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line298"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line299"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line300"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line301"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">closeCursor</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line302"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line303"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line304"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$postInsertIds</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line305"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line306"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line307"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line308"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Retrieves&nbsp;the&nbsp;default&nbsp;version&nbsp;value&nbsp;which&nbsp;was&nbsp;created</span></span></code></li>
<li><a class="anchor" name="line309"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;preceding&nbsp;INSERT&nbsp;statement&nbsp;and&nbsp;assigns&nbsp;it&nbsp;back&nbsp;in&nbsp;to&nbsp;the</span></span></code></li>
<li><a class="anchor" name="line310"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;entities&nbsp;version&nbsp;field.</span></span></code></li>
<li><a class="anchor" name="line311"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line312"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;$entity</span></span></code></li>
<li><a class="anchor" name="line313"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;$id</span></span></code></li>
<li><a class="anchor" name="line314"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line315"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;void</span></span></code></li>
<li><a class="anchor" name="line316"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line317"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">assignDefaultVersionValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line318"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line319"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchVersionValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line320"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line321"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFieldValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">versionField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line322"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line323"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line324"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line325"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Fetches&nbsp;the&nbsp;current&nbsp;version&nbsp;value&nbsp;of&nbsp;a&nbsp;versioned&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line326"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line327"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;\Doctrine\ORM\Mapping\ClassMetadata&nbsp;$versionedClass</span></span></code></li>
<li><a class="anchor" name="line328"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$id</span></span></code></li>
<li><a class="anchor" name="line329"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line330"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed</span></span></code></li>
<li><a class="anchor" name="line331"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line332"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">fetchVersionValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line333"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line334"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionField&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">versionField</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line335"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line336"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$identifier&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIdentifierColumnNames</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line337"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line338"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line339"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;FIXME:&nbsp;Order&nbsp;with&nbsp;composite&nbsp;keys&nbsp;might&nbsp;not&nbsp;be&nbsp;correct</span></span></code></li>
<li><a class="anchor" name="line340"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnName</span></span></code></li>
<li><a class="anchor" name="line341"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;FROM&nbsp;'&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableName</span></span></code></li>
<li><a class="anchor" name="line342"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;=&nbsp;?&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;?'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line343"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line344"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$flatId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifierFlattener</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flattenIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line345"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line346"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">array_values</span><span style="color: #007700">(</span><span style="color: #0000BB">$flatId</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line347"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line348"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionedClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">])-&gt;</span><span style="color: #0000BB">convertToPHPValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line349"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line350"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line351"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line352"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line353"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line354"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line355"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line356"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line357"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$updateData&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepareUpdateData</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line358"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line359"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset(</span><span style="color: #0000BB">$updateData</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">])&nbsp;||&nbsp;!&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$updateData</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line360"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></span></code></li>
<li><a class="anchor" name="line361"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line362"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line363"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isVersioned&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isVersioned</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line364"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedTableName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line365"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line366"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$quotedTableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$isVersioned</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line367"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line368"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$isVersioned</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line369"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line370"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line371"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">assignDefaultVersionValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line372"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line373"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line374"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line375"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line376"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Performs&nbsp;an&nbsp;UPDATE&nbsp;statement&nbsp;for&nbsp;an&nbsp;entity&nbsp;on&nbsp;a&nbsp;specific&nbsp;table.</span></span></code></li>
<li><a class="anchor" name="line377"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;UPDATE&nbsp;can&nbsp;optionally&nbsp;be&nbsp;versioned,&nbsp;which&nbsp;requires&nbsp;the&nbsp;entity&nbsp;to&nbsp;have&nbsp;a&nbsp;version&nbsp;field.</span></span></code></li>
<li><a class="anchor" name="line378"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line379"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;&nbsp;$entity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;entity&nbsp;object&nbsp;being&nbsp;updated.</span></span></code></li>
<li><a class="anchor" name="line380"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;$quotedTableName&nbsp;The&nbsp;quoted&nbsp;name&nbsp;of&nbsp;the&nbsp;table&nbsp;to&nbsp;apply&nbsp;the&nbsp;UPDATE&nbsp;on.</span></span></code></li>
<li><a class="anchor" name="line381"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;$updateData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;map&nbsp;of&nbsp;columns&nbsp;to&nbsp;update&nbsp;(column&nbsp;=&gt;&nbsp;value).</span></span></code></li>
<li><a class="anchor" name="line382"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;boolean&nbsp;$versioned&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Whether&nbsp;the&nbsp;UPDATE&nbsp;should&nbsp;be&nbsp;versioned.</span></span></code></li>
<li><a class="anchor" name="line383"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line384"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;void</span></span></code></li>
<li><a class="anchor" name="line385"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line386"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\ORMException</span></span></code></li>
<li><a class="anchor" name="line387"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\OptimisticLockException</span></span></code></li>
<li><a class="anchor" name="line388"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line389"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;final&nbsp;function&nbsp;</span><span style="color: #0000BB">updateTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$quotedTableName</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$updateData</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$versioned&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line390"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line391"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$set&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line392"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line393"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line394"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line395"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$updateData&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line396"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'?'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line397"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$column&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line398"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line399"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line400"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">]):</span></span></code></li>
<li><a class="anchor" name="line401"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fieldName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line402"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$column&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line403"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line404"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'requireSQLConversion'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line405"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line406"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertToDatabaseValueSQL</span><span style="color: #007700">(</span><span style="color: #DD0000">'?'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line407"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line408"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line409"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line410"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line411"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quotedColumns</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">]):</span></span></code></li>
<li><a class="anchor" name="line412"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quotedColumns</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line413"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line414"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line415"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line416"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line417"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line418"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$set</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line419"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line420"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line421"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line422"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line423"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$identifier&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line424"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line425"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$idField</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line426"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line427"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line428"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line429"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line430"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$idField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line431"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line432"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line433"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line434"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line435"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line436"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line437"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetMapping&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$idField</span><span style="color: #007700">][</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line438"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line439"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line440"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(isset(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]])):</span></span></code></li>
<li><a class="anchor" name="line441"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line442"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line443"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line444"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(isset(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]])):</span></span></code></li>
<li><a class="anchor" name="line445"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line446"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line447"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line448"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</span></span></code></li>
<li><a class="anchor" name="line449"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">unrecognizedField</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line450"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line451"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line452"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line453"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line454"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$versioned</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line455"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionField&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">versionField</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line456"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionFieldType&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line457"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionColumn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line458"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line459"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$versionColumn</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line460"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line461"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line462"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line463"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$versionFieldType</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line464"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">SMALLINT</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line465"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">INTEGER</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line466"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">BIGINT</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line467"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$set</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$versionColumn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$versionColumn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;+&nbsp;1'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line468"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line469"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line470"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">DATETIME</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line471"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$set</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$versionColumn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;CURRENT_TIMESTAMP'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line472"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line473"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line474"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line475"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line476"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'UPDATE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$quotedTableName</span></span></code></li>
<li><a class="anchor" name="line477"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;SET&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$set</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line478"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;=&nbsp;?&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$where</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;?'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line479"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line480"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeUpdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line481"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line482"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$versioned&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line483"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">OptimisticLockException</span><span style="color: #007700">::</span><span style="color: #0000BB">lockFailed</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line484"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line485"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line486"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line487"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line488"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@todo&nbsp;Add&nbsp;check&nbsp;for&nbsp;platform&nbsp;if&nbsp;it&nbsp;supports&nbsp;foreign&nbsp;keys/cascading.</span></span></code></li>
<li><a class="anchor" name="line489"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line490"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$identifier</span></span></code></li>
<li><a class="anchor" name="line491"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line492"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;void</span></span></code></li>
<li><a class="anchor" name="line493"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line494"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">deleteJoinTableRecords</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line495"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line496"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line497"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;!==&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">MANY_TO_MANY</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line498"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line499"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line500"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line501"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;@Todo&nbsp;this&nbsp;only&nbsp;covers&nbsp;scenarios&nbsp;with&nbsp;no&nbsp;inheritance&nbsp;or&nbsp;of&nbsp;the&nbsp;same&nbsp;level.&nbsp;Is&nbsp;there&nbsp;something</span></span></code></li>
<li><a class="anchor" name="line502"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;like&nbsp;self-referential&nbsp;relationship&nbsp;between&nbsp;different&nbsp;levels&nbsp;of&nbsp;an&nbsp;inheritance&nbsp;hierarchy?&nbsp;I&nbsp;hope&nbsp;not!</span></span></code></li>
<li><a class="anchor" name="line503"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selfReferential&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line504"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line505"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line506"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$otherColumns&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line507"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$otherKeys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line508"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line509"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line510"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line511"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line512"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line513"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line514"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line515"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line516"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line517"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'inverseJoinColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line518"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line519"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line520"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$selfReferential</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line521"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$otherColumns&nbsp;</span><span style="color: #007700">=&nbsp;(!&nbsp;</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line522"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line523"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'inverseJoinColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line524"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line525"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line526"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line527"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$keys</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line528"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line529"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line530"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$otherColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line531"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$otherKeys</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line532"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line533"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line534"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$mapping</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOnDeleteCascade'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line535"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line536"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line537"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line538"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line539"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line540"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinTableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">array_combine</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line541"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line542"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$selfReferential</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line543"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinTableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">array_combine</span><span style="color: #007700">(</span><span style="color: #0000BB">$otherKeys</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line544"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line545"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line546"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line547"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line548"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line549"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line550"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line551"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line552"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line553"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line554"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$identifier&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line555"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line556"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$idColumns&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIdentifierColumnNames</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line557"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_combine</span><span style="color: #007700">(</span><span style="color: #0000BB">$idColumns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line558"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(function&nbsp;(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">)&nbsp;use&nbsp;(</span><span style="color: #0000BB">$class</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line559"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line560"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line561"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line562"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line563"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line564"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetMapping&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">][</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line565"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line566"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line567"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line568"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line569"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line570"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line571"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line572"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line573"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line574"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">unrecognizedField</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetMapping</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line575"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line576"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line577"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line578"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteJoinTableRecords</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line579"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line580"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(bool)&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line581"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line582"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line583"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line584"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Prepares&nbsp;the&nbsp;changeset&nbsp;of&nbsp;an&nbsp;entity&nbsp;for&nbsp;database&nbsp;insertion&nbsp;(UPDATE).</span></span></code></li>
<li><a class="anchor" name="line585"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line586"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;changeset&nbsp;is&nbsp;obtained&nbsp;from&nbsp;the&nbsp;currently&nbsp;running&nbsp;UnitOfWork.</span></span></code></li>
<li><a class="anchor" name="line587"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line588"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;During&nbsp;this&nbsp;preparation&nbsp;the&nbsp;array&nbsp;that&nbsp;is&nbsp;passed&nbsp;as&nbsp;the&nbsp;second&nbsp;parameter&nbsp;is&nbsp;filled&nbsp;with</span></span></code></li>
<li><a class="anchor" name="line589"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;columnName&gt;&nbsp;=&gt;&nbsp;&lt;value&gt;&nbsp;pairs,&nbsp;grouped&nbsp;by&nbsp;table&nbsp;name.</span></span></code></li>
<li><a class="anchor" name="line590"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line591"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Example:</span></span></code></li>
<li><a class="anchor" name="line592"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;code&gt;</span></span></code></li>
<li><a class="anchor" name="line593"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line594"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;'foo_table'&nbsp;=&gt;&nbsp;array('column1'&nbsp;=&gt;&nbsp;'value1',&nbsp;'column2'&nbsp;=&gt;&nbsp;'value2',&nbsp;...),</span></span></code></li>
<li><a class="anchor" name="line595"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;'bar_table'&nbsp;=&gt;&nbsp;array('columnX'&nbsp;=&gt;&nbsp;'valueX',&nbsp;'columnY'&nbsp;=&gt;&nbsp;'valueY',&nbsp;...),</span></span></code></li>
<li><a class="anchor" name="line596"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;...</span></span></code></li>
<li><a class="anchor" name="line597"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;)</span></span></code></li>
<li><a class="anchor" name="line598"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;/code&gt;</span></span></code></li>
<li><a class="anchor" name="line599"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line600"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;$entity&nbsp;The&nbsp;entity&nbsp;for&nbsp;which&nbsp;to&nbsp;prepare&nbsp;the&nbsp;data.</span></span></code></li>
<li><a class="anchor" name="line601"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line602"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array&nbsp;The&nbsp;prepared&nbsp;data.</span></span></code></li>
<li><a class="anchor" name="line603"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line604"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">prepareUpdateData</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line605"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line606"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionField&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line607"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line608"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$uow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line609"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line610"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((</span><span style="color: #0000BB">$versioned&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isVersioned</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line611"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$versionField&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">versionField</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line612"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line613"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line614"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$uow</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getEntityChangeSet</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$change</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line615"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$versionField</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$versionField&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line616"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line617"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line618"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line619"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">embeddedClasses</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line620"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line621"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line622"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line623"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newVal&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$change</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line624"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line625"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line626"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line627"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line628"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOwningTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">)][</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$newVal</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line629"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line630"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line631"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line632"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line633"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line634"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line635"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Only&nbsp;owning&nbsp;side&nbsp;of&nbsp;x-1&nbsp;associations&nbsp;can&nbsp;have&nbsp;a&nbsp;FK&nbsp;column.</span></span></code></li>
<li><a class="anchor" name="line636"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]&nbsp;||&nbsp;!&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">TO_ONE</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line637"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line638"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line639"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line640"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$newVal&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line641"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$oid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">spl_object_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$newVal</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line642"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line643"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queuedInserts</span><span style="color: #007700">[</span><span style="color: #0000BB">$oid</span><span style="color: #007700">])&nbsp;||&nbsp;</span><span style="color: #0000BB">$uow</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isScheduledForInsert</span><span style="color: #007700">(</span><span style="color: #0000BB">$newVal</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line644"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;The&nbsp;associated&nbsp;entity&nbsp;$newVal&nbsp;is&nbsp;not&nbsp;yet&nbsp;persisted,&nbsp;so&nbsp;we&nbsp;must</span></span></code></li>
<li><a class="anchor" name="line645"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;$newVal&nbsp;=&nbsp;null,&nbsp;in&nbsp;order&nbsp;to&nbsp;insert&nbsp;a&nbsp;null&nbsp;value&nbsp;and&nbsp;schedule&nbsp;an</span></span></code></li>
<li><a class="anchor" name="line646"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extra&nbsp;update&nbsp;on&nbsp;the&nbsp;UnitOfWork.</span></span></code></li>
<li><a class="anchor" name="line647"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$uow</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scheduleExtraUpdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$newVal</span><span style="color: #007700">)));</span></span></code></li>
<li><a class="anchor" name="line648"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line649"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newVal&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line650"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line651"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line652"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line653"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line654"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line655"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$newVal&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line656"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$uow</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$newVal</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line657"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line658"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line659"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetClass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line660"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$owningTable&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOwningTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line661"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line662"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line663"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceColumn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line664"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetColumn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'referencedColumnName'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line665"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedColumn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line666"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line667"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quotedColumns</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceColumn</span><span style="color: #007700">]&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$quotedColumn</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line668"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceColumn</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">PersisterHelper</span><span style="color: #007700">::</span><span style="color: #0000BB">getTypeOfColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line669"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">$owningTable</span><span style="color: #007700">][</span><span style="color: #0000BB">$sourceColumn</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$newValId</span></span></code></li>
<li><a class="anchor" name="line670"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$newValId</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFieldForColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetColumn</span><span style="color: #007700">)]</span></span></code></li>
<li><a class="anchor" name="line671"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line672"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line673"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line674"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line675"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line676"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line677"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line678"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line679"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Prepares&nbsp;the&nbsp;data&nbsp;changeset&nbsp;of&nbsp;a&nbsp;managed&nbsp;entity&nbsp;for&nbsp;database&nbsp;insertion&nbsp;(initial&nbsp;INSERT).</span></span></code></li>
<li><a class="anchor" name="line680"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;changeset&nbsp;of&nbsp;the&nbsp;entity&nbsp;is&nbsp;obtained&nbsp;from&nbsp;the&nbsp;currently&nbsp;running&nbsp;UnitOfWork.</span></span></code></li>
<li><a class="anchor" name="line681"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line682"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;default&nbsp;insert&nbsp;data&nbsp;preparation&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;for&nbsp;updates.</span></span></code></li>
<li><a class="anchor" name="line683"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line684"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;$entity&nbsp;The&nbsp;entity&nbsp;for&nbsp;which&nbsp;to&nbsp;prepare&nbsp;the&nbsp;data.</span></span></code></li>
<li><a class="anchor" name="line685"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line686"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array&nbsp;The&nbsp;prepared&nbsp;data&nbsp;for&nbsp;the&nbsp;tables&nbsp;to&nbsp;update.</span></span></code></li>
<li><a class="anchor" name="line687"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line688"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;prepareUpdateData</span></span></code></li>
<li><a class="anchor" name="line689"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line690"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">prepareInsertData</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line691"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line692"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepareUpdateData</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line693"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line694"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line695"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line696"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line697"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line698"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getOwningTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line699"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line700"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line701"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line702"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line703"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line704"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line705"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line706"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">load</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$hints&nbsp;</span><span style="color: #007700">=&nbsp;array(),&nbsp;</span><span style="color: #0000BB">$lockMode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line707"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line708"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line709"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line710"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line711"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li class="selected"><a class="anchor" name="line712"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line713"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line714"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$entity&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line715"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">[</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_REFRESH</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line716"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">[</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_REFRESH_ENTITY</span><span style="color: #007700">]&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line717"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line718"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line719"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hydrator&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_SIMPLEOBJECT</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line720"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$entities&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$hydrator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line721"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line722"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$entities&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$entities</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line723"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line724"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line725"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line726"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line727"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line728"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadById</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line729"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line730"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line731"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line732"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line733"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line734"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line735"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line736"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadOneToOneEntity</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$identifier&nbsp;</span><span style="color: #007700">=&nbsp;array())</span></span></code></li>
<li><a class="anchor" name="line737"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line738"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((</span><span style="color: #0000BB">$foundEntity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">tryGetById</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]))&nbsp;!=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line739"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$foundEntity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line740"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line741"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line742"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetClass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line743"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line744"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line745"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isInverseSingleValued&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inversedBy'</span><span style="color: #007700">]&nbsp;&amp;&amp;&nbsp;!&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCollectionValuedAssociation</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inversedBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line746"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line747"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Mark&nbsp;inverse&nbsp;side&nbsp;as&nbsp;fetched&nbsp;in&nbsp;the&nbsp;hints,&nbsp;otherwise&nbsp;the&nbsp;UoW&nbsp;would</span></span></code></li>
<li><a class="anchor" name="line748"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;try&nbsp;to&nbsp;load&nbsp;it&nbsp;in&nbsp;a&nbsp;separate&nbsp;query&nbsp;(remember:&nbsp;to-one&nbsp;inverse&nbsp;sides&nbsp;can&nbsp;not&nbsp;be&nbsp;lazy).</span></span></code></li>
<li><a class="anchor" name="line749"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line750"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line751"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$isInverseSingleValued</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line752"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">[</span><span style="color: #DD0000">'fetched'</span><span style="color: #007700">][</span><span style="color: #DD0000">"r"</span><span style="color: #007700">][</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inversedBy'</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line753"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line754"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line755"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;cascade&nbsp;read-only&nbsp;status</span></span></code></li>
<li><a class="anchor" name="line756"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;em-&gt;getUnitOfWork()-&gt;isReadOnly($sourceEntity))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line757"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hints[Query::HINT_READ_ONLY]&nbsp;=&nbsp;true;</span></span></code></li>
<li><a class="anchor" name="line758"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line759"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line760"></a><code><span style="color: #FF8000"></span></span></code></li>
<li><a class="anchor" name="line761"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetEntity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line762"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line763"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Complete&nbsp;bidirectional&nbsp;association,&nbsp;if&nbsp;necessary</span></span></code></li>
<li><a class="anchor" name="line764"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$targetEntity&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$isInverseSingleValued</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line765"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inversedBy'</span><span style="color: #007700">]]-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line766"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line767"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line768"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line769"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line770"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line771"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line772"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$owningAssoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAssociationMapping</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line773"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line774"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;TRICKY:&nbsp;since&nbsp;the&nbsp;association&nbsp;is&nbsp;specular&nbsp;source&nbsp;and&nbsp;target&nbsp;are&nbsp;flipped</span></span></code></li>
<li><a class="anchor" name="line775"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$owningAssoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetToSourceKeyColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$sourceKeyColumn&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line776"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line777"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">MappingException</span><span style="color: #007700">::</span><span style="color: #0000BB">joinColumnMustPointToMappedField</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line778"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceKeyColumn</span></span></code></li>
<li><a class="anchor" name="line779"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line780"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line781"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line782"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;unset&nbsp;the&nbsp;old&nbsp;value&nbsp;and&nbsp;set&nbsp;the&nbsp;new&nbsp;sql&nbsp;aliased&nbsp;value&nbsp;here.&nbsp;By&nbsp;definition</span></span></code></li>
<li><a class="anchor" name="line783"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;unset($identifier[$targetKeyColumn]&nbsp;works&nbsp;here&nbsp;with&nbsp;how&nbsp;UnitOfWork::createEntity()&nbsp;calls&nbsp;this&nbsp;method.</span></span></code></li>
<li><a class="anchor" name="line784"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">]&nbsp;=</span></span></code></li>
<li><a class="anchor" name="line785"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">]]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line786"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line787"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line788"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line789"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line790"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetEntity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$identifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line791"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line792"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$targetEntity&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line793"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFieldValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line794"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line795"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line796"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line797"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line798"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line799"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line800"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line801"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line802"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">refresh</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line803"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line804"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line805"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line806"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line807"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line808"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hydrator&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">(</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line809"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hydrator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_REFRESH&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line810"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line811"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line812"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line813"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritDoc}</span></span></code></li>
<li><a class="anchor" name="line814"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line815"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">=&nbsp;array())</span></span></code></li>
<li><a class="anchor" name="line816"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line817"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCountSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line818"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line819"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">Criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line820"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandCriteriaParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line821"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line822"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line823"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">fetchColumn</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line824"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line825"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line826"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line827"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line828"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line829"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadCriteria</span><span style="color: #007700">(</span><span style="color: #0000BB">Criteria&nbsp;$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line830"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line831"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOrderings</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line832"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$limit&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMaxResults</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line833"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$offset&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFirstResult</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line834"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line835"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line836"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandCriteriaParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line837"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line838"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line839"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hydrator&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">((</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_SIMPLEOBJECT</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line840"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line841"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$hydrator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">UnitOfWork</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_DEFEREAGERLOAD&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line842"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line843"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line844"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line845"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line846"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line847"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">expandCriteriaParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">Criteria&nbsp;$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line848"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line849"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$expression&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWhereExpression</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line850"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sqlParams&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line851"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sqlTypes&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line852"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line853"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$expression&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line854"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$sqlParams</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sqlTypes</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line855"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line856"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line857"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$valueVisitor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SqlValueVisitor</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line858"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line859"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$valueVisitor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dispatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$expression</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line860"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line861"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$valueVisitor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getParamsAndTypes</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line862"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line863"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$param</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line864"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sqlParams&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$sqlParams</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$param</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line865"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line866"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line867"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$types&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line868"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list&nbsp;(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line869"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sqlTypes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$sqlTypes</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line870"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line871"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line872"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$sqlParams</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sqlTypes</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line873"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line874"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line875"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line876"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line877"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line878"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadAll</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">=&nbsp;array(),&nbsp;array&nbsp;</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line879"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line880"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line881"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line882"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line883"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line884"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line885"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line886"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hydrator&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">((</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_SIMPLEOBJECT</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line887"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line888"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$hydrator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">UnitOfWork</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_DEFEREAGERLOAD&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line889"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line890"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line891"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line892"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line893"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line894"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getManyToManyCollection</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line895"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line896"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line897"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line898"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getManyToManyStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line899"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line900"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadArrayFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line901"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line902"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line903"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line904"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Loads&nbsp;an&nbsp;array&nbsp;of&nbsp;entities&nbsp;from&nbsp;a&nbsp;given&nbsp;DBAL&nbsp;statement.</span></span></code></li>
<li><a class="anchor" name="line905"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line906"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line907"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;\Doctrine\DBAL\Statement&nbsp;$stmt</span></span></code></li>
<li><a class="anchor" name="line908"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line909"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line910"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line911"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">loadArrayFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line912"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line913"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line914"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">UnitOfWork</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_DEFEREAGERLOAD&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line915"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line916"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line917"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm&nbsp;</span><span style="color: #007700">=&nbsp;clone&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;this&nbsp;is&nbsp;necessary&nbsp;because&nbsp;the&nbsp;"default&nbsp;rsm"&nbsp;should&nbsp;be&nbsp;changed.</span></span></code></li>
<li><a class="anchor" name="line918"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addIndexBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'r'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line919"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line920"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line921"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">(</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rsm</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line922"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line923"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line924"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line925"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Hydrates&nbsp;a&nbsp;collection&nbsp;from&nbsp;a&nbsp;given&nbsp;DBAL&nbsp;statement.</span></span></code></li>
<li><a class="anchor" name="line926"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line927"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line928"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;\Doctrine\DBAL\Statement&nbsp;$stmt</span></span></code></li>
<li><a class="anchor" name="line929"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;PersistentCollection&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$coll</span></span></code></li>
<li><a class="anchor" name="line930"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line931"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line932"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line933"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">loadCollectionFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$coll</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line934"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line935"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line936"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hints&nbsp;</span><span style="color: #007700">=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line937"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">UnitOfWork</span><span style="color: #007700">::</span><span style="color: #0000BB">HINT_DEFEREAGERLOAD&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line938"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'collection'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$coll</span></span></code></li>
<li><a class="anchor" name="line939"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line940"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line941"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line942"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm&nbsp;</span><span style="color: #007700">=&nbsp;clone&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;this&nbsp;is&nbsp;necessary&nbsp;because&nbsp;the&nbsp;"default&nbsp;rsm"&nbsp;should&nbsp;be&nbsp;changed.</span></span></code></li>
<li><a class="anchor" name="line943"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addIndexBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'r'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line944"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line945"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line946"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">newHydrator</span><span style="color: #007700">(</span><span style="color: #0000BB">Query</span><span style="color: #007700">::</span><span style="color: #0000BB">HYDRATE_OBJECT</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">hydrateAll</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rsm</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hints</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line947"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line948"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line949"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line950"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line951"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line952"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadManyToManyCollection</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PersistentCollection&nbsp;$coll</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line953"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line954"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getManyToManyStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line955"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line956"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadCollectionFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$coll</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line957"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line958"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line959"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line960"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line961"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;&nbsp;&nbsp;$sourceEntity</span></span></code></li>
<li><a class="anchor" name="line962"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int|null&nbsp;$offset</span></span></code></li>
<li><a class="anchor" name="line963"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int|null&nbsp;$limit</span></span></code></li>
<li><a class="anchor" name="line964"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line965"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;\Doctrine\DBAL\Driver\Statement</span></span></code></li>
<li><a class="anchor" name="line966"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line967"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\Mapping\MappingException</span></span></code></li>
<li><a class="anchor" name="line968"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line969"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getManyToManyStatement</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line970"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line971"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line972"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line973"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line974"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line975"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line976"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line977"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line978"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line979"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line980"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line981"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line982"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line983"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line984"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line985"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line986"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'inverseJoinColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line987"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line988"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedJoinTable&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line989"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line990"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line991"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line992"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceKeyColumn&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'referencedColumnName'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line993"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedKeyColumn&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line994"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line995"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line996"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">containsForeignIdentifier</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line997"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFieldForColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line998"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line999"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1000"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1001"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1002"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">])-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line1003"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1004"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1005"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1006"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1007"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;isset(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">]):</span></span></code></li>
<li><a class="anchor" name="line1008"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1009"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1010"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1011"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1012"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1013"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</span></span></code></li>
<li><a class="anchor" name="line1014"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">MappingException</span><span style="color: #007700">::</span><span style="color: #0000BB">joinColumnMustPointToMappedField</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line1015"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceKeyColumn</span></span></code></li>
<li><a class="anchor" name="line1016"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1017"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1018"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1019"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">[</span><span style="color: #0000BB">$quotedJoinTable&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$quotedKeyColumn</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1020"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line1021"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1022"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'field'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1023"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1024"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></code></li>
<li><a class="anchor" name="line1025"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1026"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1027"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1028"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandToManyParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1029"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1030"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1031"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1032"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1033"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1034"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1035"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1036"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1037"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1038"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1039"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1040"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1041"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinSql&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1042"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderBySql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1043"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1044"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">MANY_TO_MANY</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1045"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectManyToManyJoinSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1046"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1047"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1048"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'orderBy'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1049"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'orderBy'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1050"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1051"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1052"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1053"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderBySql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOrderBySQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1054"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1055"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1056"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">Criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1057"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionCriteriaSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1058"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1059"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1060"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1061"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">LockMode</span><span style="color: #007700">::</span><span style="color: #0000BB">PESSIMISTIC_READ</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line1062"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadLockSql</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1063"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1064"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1065"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">LockMode</span><span style="color: #007700">::</span><span style="color: #0000BB">PESSIMISTIC_WRITE</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line1066"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteLockSql</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1067"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1068"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1069"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1070"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectColumnsSQL</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1071"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1072"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$filterSql&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateFilterConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1073"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1074"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1075"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1076"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$conditionSql</span></span></code></li>
<li><a class="anchor" name="line1077"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filterSql</span></span></code></li>
<li><a class="anchor" name="line1078"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1079"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1080"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1081"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$select&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1082"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$from&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;FROM&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1083"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$join&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$joinSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1084"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1085"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lock&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendLockHint</span><span style="color: #007700">(</span><span style="color: #0000BB">$from</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1086"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$select</span></span></code></li>
<li><a class="anchor" name="line1087"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$lock</span></span></code></li>
<li><a class="anchor" name="line1088"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$join</span></span></code></li>
<li><a class="anchor" name="line1089"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$where</span></span></code></li>
<li><a class="anchor" name="line1090"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$orderBySql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1091"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1092"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modifyLimitQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">$lockSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1093"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1094"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1095"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1096"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritDoc}</span></span></code></li>
<li><a class="anchor" name="line1097"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1098"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getCountSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">=&nbsp;array())</span></span></code></li>
<li><a class="anchor" name="line1099"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1100"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1101"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1102"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1103"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">Criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1104"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionCriteriaSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1105"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1106"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1107"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$filterSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateFilterConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1108"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1109"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1110"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$conditionSql</span></span></code></li>
<li><a class="anchor" name="line1111"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filterSql</span></span></code></li>
<li><a class="anchor" name="line1112"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1113"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1114"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1115"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;COUNT(*)&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1116"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'FROM&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableAlias</span></span></code></li>
<li><a class="anchor" name="line1117"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;(empty(</span><span style="color: #0000BB">$conditionSql</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$conditionSql</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1118"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1119"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$sql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1120"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1121"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1122"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1123"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;ORDER&nbsp;BY&nbsp;SQL&nbsp;snippet&nbsp;for&nbsp;ordered&nbsp;collections.</span></span></code></li>
<li><a class="anchor" name="line1124"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1125"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;$orderBy</span></span></code></li>
<li><a class="anchor" name="line1126"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$baseTableAlias</span></span></code></li>
<li><a class="anchor" name="line1127"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1128"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1129"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1130"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\ORMException</span></span></code></li>
<li><a class="anchor" name="line1131"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1132"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;final&nbsp;function&nbsp;</span><span style="color: #0000BB">getOrderBySQL</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$orderBy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$baseTableAlias</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1133"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1134"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderByList&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1135"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1136"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$orderBy&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$fieldName&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$orientation</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1137"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1138"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orientation&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtoupper</span><span style="color: #007700">(</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$orientation</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1139"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1140"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$orientation&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">'ASC'&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$orientation&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">'DESC'</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1141"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">invalidOrientation</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1142"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1143"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1144"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1145"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1146"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1147"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$baseTableAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1148"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1149"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1150"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderByList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$orientation</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1151"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1152"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1153"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1154"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1155"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1156"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1157"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1158"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">invalidFindByInverseAssociation</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1159"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1160"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1161"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1162"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1163"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$baseTableAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1164"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1165"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1166"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1167"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$orderByList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$orientation</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1168"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1169"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1170"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1171"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1172"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1173"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">unrecognizedField</span><span style="color: #007700">(</span><span style="color: #0000BB">$fieldName</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1174"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1175"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1176"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'&nbsp;ORDER&nbsp;BY&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$orderByList</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1177"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1178"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1179"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1180"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;SQL&nbsp;fragment&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;columns&nbsp;to&nbsp;select&nbsp;when&nbsp;querying&nbsp;for</span></span></code></li>
<li><a class="anchor" name="line1181"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;an&nbsp;entity&nbsp;in&nbsp;this&nbsp;persister.</span></span></code></li>
<li><a class="anchor" name="line1182"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1183"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Subclasses&nbsp;should&nbsp;override&nbsp;this&nbsp;method&nbsp;to&nbsp;alter&nbsp;or&nbsp;change&nbsp;the&nbsp;select&nbsp;column</span></span></code></li>
<li><a class="anchor" name="line1184"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;list&nbsp;SQL&nbsp;fragment.&nbsp;Note&nbsp;that&nbsp;in&nbsp;the&nbsp;implementation&nbsp;of&nbsp;BasicEntityPersister</span></span></code></li>
<li><a class="anchor" name="line1185"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;resulting&nbsp;SQL&nbsp;fragment&nbsp;is&nbsp;generated&nbsp;only&nbsp;once&nbsp;and&nbsp;cached&nbsp;in&nbsp;{@link&nbsp;selectColumnListSql}.</span></span></code></li>
<li><a class="anchor" name="line1186"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Subclasses&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;do&nbsp;the&nbsp;same.</span></span></code></li>
<li><a class="anchor" name="line1187"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1188"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;SQL&nbsp;fragment.</span></span></code></li>
<li><a class="anchor" name="line1189"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1190"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectColumnsSQL</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line1191"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1192"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectColumnListSql&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1193"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectColumnListSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1194"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1195"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1196"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1197"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addEntityResult</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;r&nbsp;for&nbsp;root</span></span></code></li>
<li><a class="anchor" name="line1198"></a><code><span style="color: #FF8000"></span></span></code></li>
<li><a class="anchor" name="line1199"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;regular&nbsp;columns&nbsp;to&nbsp;select&nbsp;list</span></span></code></li>
<li><a class="anchor" name="line1200"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1201"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectColumnSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1202"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1203"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1204"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1205"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$eagerAliasCounter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1206"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1207"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$assocField&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1208"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assocColumnSQL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectColumnAssociationSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$assocField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1209"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1210"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assocColumnSQL</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1211"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$assocColumnSQL</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1212"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1213"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1214"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isAssocToOneInverseSide&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">TO_ONE&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1215"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isAssocFromOneEager&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;!==&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">MANY_TO_MANY&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'fetch'</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_EAGER</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1216"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1217"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;(</span><span style="color: #0000BB">$isAssocFromOneEager&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$isAssocToOneInverseSide</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1218"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1219"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1220"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1221"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(((</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">TO_MANY</span><span style="color: #007700">)&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">handlesLimits</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1222"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1223"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1224"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1225"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$eagerEntity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1226"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1227"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">inheritanceType&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">INHERITANCE_TYPE_NONE</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1228"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;</span><span style="color: #FF8000">//&nbsp;now&nbsp;this&nbsp;is&nbsp;why&nbsp;you&nbsp;shouldn't&nbsp;use&nbsp;inheritance</span></span></code></li>
<li><a class="anchor" name="line1229"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}</span></span></code></li>
<li><a class="anchor" name="line1230"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1231"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assocAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'e'&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$eagerAliasCounter</span><span style="color: #007700">++);</span></span></code></li>
<li><a class="anchor" name="line1232"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addJoinedEntityResult</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assocField</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1233"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1234"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1235"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectColumnSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1236"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1237"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1238"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$eagerAssocField&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$eagerAssoc</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1239"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$eagerAssocColumnSQL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectColumnAssociationSQL</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line1240"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$eagerAssocField</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$eagerAssoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assocAlias</span></span></code></li>
<li><a class="anchor" name="line1241"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1242"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1243"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$eagerAssocColumnSQL</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1244"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$eagerAssocColumnSQL</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1245"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1246"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1247"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1248"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1249"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinCondition&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1250"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1251"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1252"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addIndexBy</span><span style="color: #007700">(</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'indexBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1253"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1254"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1255"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1256"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$eagerEntity&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1257"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAssociationMapping</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1258"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1259"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1260"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinTableAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1261"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1262"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1263"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1264"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1265"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinSQLForJoinColumns</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1266"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1267"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1268"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceCol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1269"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetCol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReferencedJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1270"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinCondition</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1271"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sourceCol&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$targetCol</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1272"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1273"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1274"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Add&nbsp;filter&nbsp;SQL</span></span></code></li>
<li><a class="anchor" name="line1275"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$filterSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateFilterConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$eagerEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1276"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinCondition</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1277"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1278"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1279"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1280"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1281"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;LEFT&nbsp;JOIN'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1282"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1283"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1284"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceCol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1285"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetCol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReferencedJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1286"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1287"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinCondition</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$assocAlias</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sourceCol&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1288"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$targetCol</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1289"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1290"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1291"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1292"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$joinTableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;ON&nbsp;'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1293"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectJoinSql&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$joinCondition</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1294"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1295"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1296"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectColumnListSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1297"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1298"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectColumnListSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1299"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1300"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1301"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1302"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;SQL&nbsp;join&nbsp;fragment&nbsp;used&nbsp;when&nbsp;selecting&nbsp;entities&nbsp;from&nbsp;an&nbsp;association.</span></span></code></li>
<li><a class="anchor" name="line1303"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1304"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$field</span></span></code></li>
<li><a class="anchor" name="line1305"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line1306"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;ClassMetadata&nbsp;$class</span></span></code></li>
<li><a class="anchor" name="line1307"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$alias</span></span></code></li>
<li><a class="anchor" name="line1308"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1309"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1310"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1311"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectColumnAssociationSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassMetadata&nbsp;$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1312"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1313"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">TO_ONE</span><span style="color: #007700">)&nbsp;)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1314"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1315"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1316"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1317"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1318"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetClass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1319"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1320"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1321"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1322"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$isIdentifier&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1323"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedColumn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1324"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$resultColumnName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLColumnAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1325"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;(</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'r'&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)&nbsp;)</span></span></code></li>
<li><a class="anchor" name="line1326"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$quotedColumn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;AS&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$resultColumnName</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1327"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">PersisterHelper</span><span style="color: #007700">::</span><span style="color: #0000BB">getTypeOfColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'referencedColumnName'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$targetClass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1328"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1329"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addMetaResult</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$resultColumnName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$quotedColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$isIdentifier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1330"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1331"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1332"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$columnList</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1333"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1334"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1335"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1336"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;SQL&nbsp;join&nbsp;fragment&nbsp;used&nbsp;when&nbsp;selecting&nbsp;entities&nbsp;from&nbsp;a</span></span></code></li>
<li><a class="anchor" name="line1337"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;many-to-many&nbsp;association.</span></span></code></li>
<li><a class="anchor" name="line1338"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1339"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$manyToMany</span></span></code></li>
<li><a class="anchor" name="line1340"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1341"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1342"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1343"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectManyToManyJoinSQL</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1344"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1345"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1346"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1347"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceTableAlias&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1348"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1349"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1350"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$targetEntity&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1351"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line1352"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1353"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1354"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1355"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinColumns&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$manyToMany</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1356"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'inverseJoinColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1357"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1358"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1359"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1360"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedSourceColumn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1361"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$quotedTargetColumn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReferencedJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1362"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditions</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$sourceTableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$quotedTargetColumn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$quotedSourceColumn</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1363"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1364"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1365"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'&nbsp;INNER&nbsp;JOIN&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;ON&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conditions</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1366"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1367"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1368"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1369"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1370"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1371"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getInsertSQL</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line1372"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1373"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1374"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1375"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1376"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1377"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertColumnList</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1378"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1379"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1380"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(empty(</span><span style="color: #0000BB">$columns</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1381"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$identityColumn&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1382"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getEmptyIdentityInsertSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$identityColumn</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1383"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1384"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1385"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1386"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1387"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$values&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1388"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_unique</span><span style="color: #007700">(</span><span style="color: #0000BB">$columns</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1389"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1390"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1391"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'?'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1392"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1393"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$column</span><span style="color: #007700">])</span></span></code></li>
<li><a class="anchor" name="line1394"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$column</span><span style="color: #007700">]])</span></span></code></li>
<li><a class="anchor" name="line1395"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$column</span><span style="color: #007700">]][</span><span style="color: #DD0000">'requireSQLConversion'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1396"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1397"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$column</span><span style="color: #007700">]]);</span></span></code></li>
<li><a class="anchor" name="line1398"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertToDatabaseValueSQL</span><span style="color: #007700">(</span><span style="color: #DD0000">'?'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1399"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1400"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1401"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$values</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1402"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1403"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1404"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1405"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$values&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">',&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$values</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1406"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1407"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'INSERT&nbsp;INTO&nbsp;%s&nbsp;(%s)&nbsp;VALUES&nbsp;(%s)'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tableName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$values</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1408"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1409"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1410"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1411"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1412"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1413"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;list&nbsp;of&nbsp;columns&nbsp;to&nbsp;put&nbsp;in&nbsp;the&nbsp;INSERT&nbsp;SQL&nbsp;statement.</span></span></code></li>
<li><a class="anchor" name="line1414"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1415"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Subclasses&nbsp;should&nbsp;override&nbsp;this&nbsp;method&nbsp;to&nbsp;alter&nbsp;or&nbsp;change&nbsp;the&nbsp;list&nbsp;of</span></span></code></li>
<li><a class="anchor" name="line1416"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;columns&nbsp;placed&nbsp;in&nbsp;the&nbsp;INSERT&nbsp;statements&nbsp;used&nbsp;by&nbsp;the&nbsp;persister.</span></span></code></li>
<li><a class="anchor" name="line1417"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1418"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array&nbsp;The&nbsp;list&nbsp;of&nbsp;columns.</span></span></code></li>
<li><a class="anchor" name="line1419"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1420"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getInsertColumnList</span><span style="color: #007700">()</span></span></code></li>
<li><a class="anchor" name="line1421"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1422"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1423"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1424"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1425"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isVersioned&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">versionField&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1426"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1427"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1428"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1429"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">embeddedClasses</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1430"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1431"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1432"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1433"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1434"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1435"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">TO_ONE</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1436"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1437"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1438"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1439"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1440"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1441"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1442"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1443"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1444"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorType&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">GENERATOR_TYPE_IDENTITY&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;!=&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1445"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1446"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnTypes</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1447"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1448"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1449"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1450"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1451"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1452"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1453"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1454"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;SQL&nbsp;snippet&nbsp;of&nbsp;a&nbsp;qualified&nbsp;column&nbsp;name&nbsp;for&nbsp;the&nbsp;given&nbsp;field&nbsp;name.</span></span></code></li>
<li><a class="anchor" name="line1455"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1456"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$field&nbsp;The&nbsp;field&nbsp;name.</span></span></code></li>
<li><a class="anchor" name="line1457"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;ClassMetadata&nbsp;$class&nbsp;The&nbsp;class&nbsp;that&nbsp;declares&nbsp;this&nbsp;field.&nbsp;The&nbsp;table&nbsp;this&nbsp;class&nbsp;is</span></span></code></li>
<li><a class="anchor" name="line1458"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapped&nbsp;to&nbsp;must&nbsp;own&nbsp;the&nbsp;column&nbsp;for&nbsp;the&nbsp;given&nbsp;field.</span></span></code></li>
<li><a class="anchor" name="line1459"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$alias</span></span></code></li>
<li><a class="anchor" name="line1460"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1461"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1462"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1463"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectColumnSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassMetadata&nbsp;$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1464"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1465"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'r'&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1466"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$root</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1467"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1468"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1469"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columnAlias&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLColumnAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1470"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1471"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rsm</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFieldResult</span><span style="color: #007700">(</span><span style="color: #0000BB">$alias</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$columnAlias</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1472"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1473"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'requireSQLConversion'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1474"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$type&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTypeOfField</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1475"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertToPHPValueSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1476"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1477"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1478"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;AS&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$columnAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1479"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1480"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1481"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1482"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;SQL&nbsp;table&nbsp;alias&nbsp;for&nbsp;the&nbsp;given&nbsp;class&nbsp;name.</span></span></code></li>
<li><a class="anchor" name="line1483"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1484"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$className</span></span></code></li>
<li><a class="anchor" name="line1485"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$assocName</span></span></code></li>
<li><a class="anchor" name="line1486"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1487"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;SQL&nbsp;table&nbsp;alias.</span></span></code></li>
<li><a class="anchor" name="line1488"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1489"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@todo&nbsp;Reconsider.&nbsp;Binding&nbsp;table&nbsp;aliases&nbsp;to&nbsp;class&nbsp;names&nbsp;is&nbsp;not&nbsp;such&nbsp;a&nbsp;good&nbsp;idea.</span></span></code></li>
<li><a class="anchor" name="line1490"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1491"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assocName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1492"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1493"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assocName</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1494"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$className&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'#'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$assocName</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1495"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1496"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1497"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlTableAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1498"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlTableAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1499"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1500"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1501"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'t'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlAliasCounter</span><span style="color: #007700">++;</span></span></code></li>
<li><a class="anchor" name="line1502"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1503"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlTableAliases</span><span style="color: #007700">[</span><span style="color: #0000BB">$className</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1504"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1505"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$tableAlias</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1506"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1507"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1508"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1509"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1510"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1511"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">lock</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1512"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1513"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1514"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1515"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1516"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1517"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">LockMode</span><span style="color: #007700">::</span><span style="color: #0000BB">PESSIMISTIC_READ</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line1518"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadLockSql</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1519"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1520"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1521"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">LockMode</span><span style="color: #007700">::</span><span style="color: #0000BB">PESSIMISTIC_WRITE</span><span style="color: #007700">:</span></span></code></li>
<li><a class="anchor" name="line1522"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1523"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteLockSql</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1524"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1525"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1526"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1527"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lock&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLockTablesSql</span><span style="color: #007700">(</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1528"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$where&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$conditionSql&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1529"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;1&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1530"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$lock</span></span></code></li>
<li><a class="anchor" name="line1531"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$where</span></span></code></li>
<li><a class="anchor" name="line1532"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$lockSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1533"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1534"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1535"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1536"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1537"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1538"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1539"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1540"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;FROM&nbsp;and&nbsp;optionally&nbsp;JOIN&nbsp;conditions&nbsp;to&nbsp;lock&nbsp;the&nbsp;entity&nbsp;managed&nbsp;by&nbsp;this&nbsp;persister.</span></span></code></li>
<li><a class="anchor" name="line1541"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1542"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$lockMode&nbsp;One&nbsp;of&nbsp;the&nbsp;Doctrine\DBAL\LockMode::*&nbsp;constants.</span></span></code></li>
<li><a class="anchor" name="line1543"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1544"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1545"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1546"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getLockTablesSql</span><span style="color: #007700">(</span><span style="color: #0000BB">$lockMode</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1547"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1548"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendLockHint</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line1549"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'FROM&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1550"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1551"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">),</span></span></code></li>
<li><a class="anchor" name="line1552"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lockMode</span></span></code></li>
<li><a class="anchor" name="line1553"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1554"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1555"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1556"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1557"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;Select&nbsp;Where&nbsp;Condition&nbsp;from&nbsp;a&nbsp;Criteria&nbsp;object.</span></span></code></li>
<li><a class="anchor" name="line1558"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1559"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;\Doctrine\Common\Collections\Criteria&nbsp;$criteria</span></span></code></li>
<li><a class="anchor" name="line1560"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1561"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1562"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1563"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectConditionCriteriaSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">Criteria&nbsp;$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1564"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1565"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$expression&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWhereExpression</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1566"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1567"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$expression&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1568"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1569"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1570"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1571"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$visitor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SqlExpressionVisitor</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1572"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1573"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$visitor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dispatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$expression</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1574"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1575"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1576"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1577"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1578"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1579"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectConditionStatementSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$comparison&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1580"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1581"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1582"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionStatementColumnSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1583"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1584"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$columns</span><span style="color: #007700">)&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$comparison&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">IN</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1585"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*</span></span></code></li>
<li><a class="anchor" name="line1586"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;@todo&nbsp;try&nbsp;to&nbsp;support&nbsp;multi-column&nbsp;IN&nbsp;expressions.</span></span></code></li>
<li><a class="anchor" name="line1587"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Example:&nbsp;(col1,&nbsp;col2)&nbsp;IN&nbsp;(('val1A',&nbsp;'val2A'),&nbsp;('val1B',&nbsp;'val2B'))</span></span></code></li>
<li><a class="anchor" name="line1588"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1589"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">cantUseInOperatorOnCompositeKeys</span><span style="color: #007700">();</span></span></code></li>
<li><a class="anchor" name="line1590"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1591"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1592"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1593"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'?'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1594"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1595"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'requireSQLConversion'</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1596"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$placeholder&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTypeOfField</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">))-&gt;</span><span style="color: #0000BB">convertToDatabaseValueSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1597"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1598"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1599"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">$comparison</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1600"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;special&nbsp;case&nbsp;null&nbsp;value&nbsp;handling</span></span></code></li>
<li><a class="anchor" name="line1601"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;((</span><span style="color: #0000BB">$comparison&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">EQ&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$comparison&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">IS</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">===</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1602"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;IS&nbsp;NULL'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1603"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1604"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1605"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1606"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$comparison&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">Comparison</span><span style="color: #007700">::</span><span style="color: #0000BB">NEQ&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1607"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;IS&nbsp;NOT&nbsp;NULL'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1608"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1609"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1610"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1611"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$column&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$comparisonMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$comparison</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1612"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1613"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1614"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1615"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1616"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$in&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s&nbsp;IN&nbsp;(%s)'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1617"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1618"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1619"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'(%s&nbsp;OR&nbsp;%s&nbsp;IS&nbsp;NULL)'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$in</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1620"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1621"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1622"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1623"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$in</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1624"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1625"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1626"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1627"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1628"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s&nbsp;IS&nbsp;NULL'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1629"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1630"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1631"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1632"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s&nbsp;=&nbsp;%s'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$placeholder</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1633"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1634"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1635"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$selectedColumns</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1636"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1637"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1638"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1639"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Builds&nbsp;the&nbsp;left-hand-side&nbsp;of&nbsp;a&nbsp;where&nbsp;condition&nbsp;statement.</span></span></code></li>
<li><a class="anchor" name="line1640"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1641"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$field</span></span></code></li>
<li><a class="anchor" name="line1642"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array|null&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line1643"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1644"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string[]</span></span></code></li>
<li><a class="anchor" name="line1645"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1646"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\ORMException</span></span></code></li>
<li><a class="anchor" name="line1647"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1648"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectConditionStatementColumnSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1649"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1650"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">columnNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1651"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$className&nbsp;</span><span style="color: #007700">=&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">]))</span></span></code></li>
<li><a class="anchor" name="line1652"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1653"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1654"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1655"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1656"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1657"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1658"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1659"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1660"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Many-To-Many&nbsp;requires&nbsp;join&nbsp;table&nbsp;check&nbsp;for&nbsp;joinColumn</span></span></code></li>
<li><a class="anchor" name="line1661"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1662"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1663"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1664"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">MANY_TO_MANY</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1665"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1666"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$association&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1667"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1668"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1669"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinTableName</span><span style="color: #007700">(</span><span style="color: #0000BB">$association</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1670"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$joinColumns&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1671"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1672"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinTable'</span><span style="color: #007700">][</span><span style="color: #DD0000">'inverseJoinColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1673"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1674"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1675"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1676"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$joinTableName&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1677"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1678"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1679"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1680"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1681"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1682"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">invalidFindByInverseAssociation</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1683"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1684"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1685"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$className&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;(isset(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">]))</span></span></code></li>
<li><a class="anchor" name="line1686"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1687"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1688"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1689"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$association</span><span style="color: #007700">[</span><span style="color: #DD0000">'joinColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1690"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJoinColumnName</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1691"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1692"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1693"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$columns</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1694"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1695"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1696"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"("</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1697"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;very&nbsp;careless&nbsp;developers&nbsp;could&nbsp;potentially&nbsp;open&nbsp;up&nbsp;this&nbsp;normally&nbsp;hidden&nbsp;api&nbsp;for&nbsp;userland&nbsp;attacks,</span></span></code></li>
<li><a class="anchor" name="line1698"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;therefore&nbsp;checking&nbsp;for&nbsp;spaces&nbsp;and&nbsp;function&nbsp;calls&nbsp;which&nbsp;are&nbsp;not&nbsp;allowed.</span></span></code></li>
<li><a class="anchor" name="line1699"></a><code><span style="color: #FF8000"></span></span></code></li>
<li><a class="anchor" name="line1700"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;found&nbsp;a&nbsp;join&nbsp;column&nbsp;condition,&nbsp;not&nbsp;really&nbsp;a&nbsp;"field"</span></span></code></li>
<li><a class="anchor" name="line1701"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;array(</span><span style="color: #0000BB">$field</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1702"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1703"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1704"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;</span><span style="color: #0000BB">ORMException</span><span style="color: #007700">::</span><span style="color: #0000BB">unrecognizedField</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1705"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1706"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1707"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1708"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;the&nbsp;conditional&nbsp;SQL&nbsp;fragment&nbsp;used&nbsp;in&nbsp;the&nbsp;WHERE&nbsp;clause&nbsp;when&nbsp;selecting</span></span></code></li>
<li><a class="anchor" name="line1709"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;entities&nbsp;in&nbsp;this&nbsp;persister.</span></span></code></li>
<li><a class="anchor" name="line1710"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1711"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Subclasses&nbsp;are&nbsp;supposed&nbsp;to&nbsp;override&nbsp;this&nbsp;method&nbsp;if&nbsp;they&nbsp;intend&nbsp;to&nbsp;change</span></span></code></li>
<li><a class="anchor" name="line1712"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;or&nbsp;alter&nbsp;the&nbsp;criteria&nbsp;by&nbsp;which&nbsp;entities&nbsp;are&nbsp;selected.</span></span></code></li>
<li><a class="anchor" name="line1713"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1714"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$criteria</span></span></code></li>
<li><a class="anchor" name="line1715"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array|null&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line1716"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1717"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span></span></code></li>
<li><a class="anchor" name="line1718"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1719"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getSelectConditionSQL</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1720"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1721"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditions&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1722"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1723"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1724"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$conditions</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionStatementSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1725"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1726"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1727"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conditions</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1728"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1729"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1730"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1731"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1732"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1733"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getOneToManyCollection</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1734"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1735"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1736"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1737"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOneToManyStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1738"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1739"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadArrayFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1740"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1741"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1742"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1743"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1744"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1745"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">loadOneToManyCollection</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PersistentCollection&nbsp;$coll</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1746"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1747"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOneToManyStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1748"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1749"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadCollectionFromStatement</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$coll</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1750"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1751"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1752"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1753"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Builds&nbsp;criteria&nbsp;and&nbsp;execute&nbsp;SQL&nbsp;statement&nbsp;to&nbsp;fetch&nbsp;the&nbsp;one&nbsp;to&nbsp;many&nbsp;entities&nbsp;from.</span></span></code></li>
<li><a class="anchor" name="line1754"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1755"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;$assoc</span></span></code></li>
<li><a class="anchor" name="line1756"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;&nbsp;&nbsp;$sourceEntity</span></span></code></li>
<li><a class="anchor" name="line1757"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int|null&nbsp;$offset</span></span></code></li>
<li><a class="anchor" name="line1758"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int|null&nbsp;$limit</span></span></code></li>
<li><a class="anchor" name="line1759"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1760"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;\Doctrine\DBAL\Statement</span></span></code></li>
<li><a class="anchor" name="line1761"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1762"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getOneToManyStatement</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1763"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1764"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1765"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1766"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1767"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1768"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$owningAssoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line1769"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sourceClass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1770"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1771"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(isset(</span><span style="color: #0000BB">$owningAssoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$owningAssoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'inherited'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1772"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1773"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$owningAssoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetToSourceKeyColumns'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$sourceKeyColumn&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1774"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">containsForeignIdentifier</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1775"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFieldForColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1776"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1777"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1778"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1779"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEntityIdentifier</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1780"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">][</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">])-&gt;</span><span style="color: #0000BB">identifier</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line1781"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1782"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1783"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1784"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line1785"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1786"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'field'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1787"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1788"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></code></li>
<li><a class="anchor" name="line1789"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1790"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</span></span></code></li>
<li><a class="anchor" name="line1791"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1792"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1793"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldNames</span><span style="color: #007700">[</span><span style="color: #0000BB">$sourceKeyColumn</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1794"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reflFields</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$sourceEntity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1795"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1796"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">[</span><span style="color: #0000BB">$tableAlias&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$targetKeyColumn</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1797"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span></span></code></li>
<li><a class="anchor" name="line1798"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1799"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'field'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$field</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1800"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$sourceClass</span><span style="color: #007700">,</span></span></code></li>
<li><a class="anchor" name="line1801"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></code></li>
<li><a class="anchor" name="line1802"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1803"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1804"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1805"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1806"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandToManyParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1807"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1808"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1809"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1810"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1811"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1812"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1813"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1814"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1815"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1816"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1817"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1818"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1819"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$field&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1820"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1821"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;</span><span style="color: #FF8000">//&nbsp;skip&nbsp;null&nbsp;values.</span></span></code></li>
<li><a class="anchor" name="line1822"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}</span></span></code></li>
<li><a class="anchor" name="line1823"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1824"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$types</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1825"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1826"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1827"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1828"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1829"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1830"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1831"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1832"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Expands&nbsp;the&nbsp;parameters&nbsp;from&nbsp;the&nbsp;given&nbsp;criteria&nbsp;and&nbsp;use&nbsp;the&nbsp;correct&nbsp;binding&nbsp;types&nbsp;if&nbsp;found,</span></span></code></li>
<li><a class="anchor" name="line1833"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;specialized&nbsp;for&nbsp;OneToMany&nbsp;or&nbsp;ManyToMany&nbsp;associations.</span></span></code></li>
<li><a class="anchor" name="line1834"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1835"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed[][]&nbsp;$criteria&nbsp;an&nbsp;array&nbsp;of&nbsp;arrays&nbsp;containing&nbsp;following:</span></span></code></li>
<li><a class="anchor" name="line1836"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;field&nbsp;to&nbsp;which&nbsp;each&nbsp;criterion&nbsp;will&nbsp;be&nbsp;bound</span></span></code></li>
<li><a class="anchor" name="line1837"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;value&nbsp;to&nbsp;be&nbsp;bound</span></span></code></li>
<li><a class="anchor" name="line1838"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;class&nbsp;to&nbsp;which&nbsp;the&nbsp;field&nbsp;belongs&nbsp;to</span></span></code></li>
<li><a class="anchor" name="line1839"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1840"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1841"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line1842"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1843"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">expandToManyParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1844"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1845"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1846"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1847"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1848"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1849"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1850"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;</span><span style="color: #FF8000">//&nbsp;skip&nbsp;null&nbsp;values.</span></span></code></li>
<li><a class="anchor" name="line1851"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}</span></span></code></li>
<li><a class="anchor" name="line1852"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1853"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$types</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">[</span><span style="color: #DD0000">'field'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">[</span><span style="color: #DD0000">'class'</span><span style="color: #007700">]));</span></span></code></li>
<li><a class="anchor" name="line1854"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$criterion</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">]));</span></span></code></li>
<li><a class="anchor" name="line1855"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1856"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1857"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1858"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1859"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1860"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1861"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Infers&nbsp;field&nbsp;types&nbsp;to&nbsp;be&nbsp;used&nbsp;by&nbsp;parameter&nbsp;type&nbsp;casting.</span></span></code></li>
<li><a class="anchor" name="line1862"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1863"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$field</span></span></code></li>
<li><a class="anchor" name="line1864"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;&nbsp;$value</span></span></code></li>
<li><a class="anchor" name="line1865"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1866"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line1867"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1868"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;\Doctrine\ORM\Query\QueryException</span></span></code></li>
<li><a class="anchor" name="line1869"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1870"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassMetadata&nbsp;$class</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1871"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1872"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1873"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1874"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1875"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(isset(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fieldMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">])):</span></span></code></li>
<li><a class="anchor" name="line1876"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$types</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PersisterHelper</span><span style="color: #007700">::</span><span style="color: #0000BB">getTypeOfField</span><span style="color: #007700">(</span><span style="color: #0000BB">$field</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1877"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1878"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1879"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(isset(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">])):</span></span></code></li>
<li><a class="anchor" name="line1880"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$field</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1881"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1882"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1883"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'isOwningSide'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1884"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$assoc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">associationMappings</span><span style="color: #007700">[</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'mappedBy'</span><span style="color: #007700">]];</span></span></code></li>
<li><a class="anchor" name="line1885"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'targetEntity'</span><span style="color: #007700">]);</span></span></code></li>
<li><a class="anchor" name="line1886"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1887"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1888"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">ClassMetadata</span><span style="color: #007700">::</span><span style="color: #0000BB">MANY_TO_MANY</span></span></code></li>
<li><a class="anchor" name="line1889"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'relationToTargetKeyColumns'</span><span style="color: #007700">]</span></span></code></li>
<li><a class="anchor" name="line1890"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;</span><span style="color: #0000BB">$assoc</span><span style="color: #007700">[</span><span style="color: #DD0000">'sourceToTargetKeyColumns'</span><span style="color: #007700">];</span></span></code></li>
<li><a class="anchor" name="line1891"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1892"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$columns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$column</span><span style="color: #007700">){</span></span></code></li>
<li><a class="anchor" name="line1893"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">PersisterHelper</span><span style="color: #007700">::</span><span style="color: #0000BB">getTypeOfColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1894"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1895"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1896"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1897"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</span></span></code></li>
<li><a class="anchor" name="line1898"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1899"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></span></code></li>
<li><a class="anchor" name="line1900"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1901"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1902"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1903"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span></span></code></li>
<li><a class="anchor" name="line1904"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1905"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">Type</span><span style="color: #007700">::</span><span style="color: #0000BB">getType</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getBindingType</span><span style="color: #007700">()&nbsp;+&nbsp;</span><span style="color: #0000BB">Connection</span><span style="color: #007700">::</span><span style="color: #0000BB">ARRAY_PARAM_OFFSET</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1906"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span></span></code></li>
<li><a class="anchor" name="line1907"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types</span></span></code></li>
<li><a class="anchor" name="line1908"></a><code><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1909"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1910"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1911"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1912"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1913"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1914"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1915"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Retrieves&nbsp;the&nbsp;parameters&nbsp;that&nbsp;identifies&nbsp;a&nbsp;value.</span></span></code></li>
<li><a class="anchor" name="line1916"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1917"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;$value</span></span></code></li>
<li><a class="anchor" name="line1918"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1919"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array</span></span></code></li>
<li><a class="anchor" name="line1920"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1921"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1922"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1923"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1924"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValue&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1925"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1926"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$itemValue</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1927"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValue&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$newValue</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$itemValue</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1928"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1929"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1930"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$newValue</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1931"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1932"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1933"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetadataFactory</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">hasMetadataFor</span><span style="color: #007700">(</span><span style="color: #0000BB">ClassUtils</span><span style="color: #007700">::</span><span style="color: #0000BB">getClass</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1934"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$class&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClassMetadata</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1935"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isIdentifierComposite</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1936"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValue&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line1937"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1938"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIdentifierValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$innerValue</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1939"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newValue&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$newValue</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$innerValue</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1940"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1941"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1942"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$newValue</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1943"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1944"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1945"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1946"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIndividualValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">));</span></span></code></li>
<li><a class="anchor" name="line1947"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1948"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1949"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1950"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Retrieves&nbsp;an&nbsp;individual&nbsp;parameter&nbsp;value.</span></span></code></li>
<li><a class="anchor" name="line1951"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1952"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;$value</span></span></code></li>
<li><a class="anchor" name="line1953"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line1954"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed</span></span></code></li>
<li><a class="anchor" name="line1955"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1956"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getIndividualValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1957"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1958"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;||&nbsp;!&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMetadataFactory</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">hasMetadataFor</span><span style="color: #007700">(</span><span style="color: #0000BB">ClassUtils</span><span style="color: #007700">::</span><span style="color: #0000BB">getClass</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1959"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1960"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1961"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1962"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUnitOfWork</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getSingleIdentifierValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1963"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1964"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1965"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line1966"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line1967"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line1968"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Criteria&nbsp;$extraConditions&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1969"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1970"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$criteria&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIdentifierValues</span><span style="color: #007700">(</span><span style="color: #0000BB">$entity</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1971"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1972"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1973"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1974"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1975"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1976"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$alias&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSQLTableAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1977"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1978"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;1&nbsp;'</span></span></code></li>
<li><a class="anchor" name="line1979"></a><code><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLockTablesSql</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line1980"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1981"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1982"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1983"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1984"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">$extraConditions</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1985"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelectConditionCriteriaSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$extraConditions</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1986"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$criteriaParams</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$criteriaTypes</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">expandCriteriaParameters</span><span style="color: #007700">(</span><span style="color: #0000BB">$extraConditions</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1987"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1988"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$criteriaParams</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1989"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$types&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$types</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$criteriaTypes</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1990"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1991"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1992"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$filterSql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateFilterConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">class</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$alias</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line1993"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filterSql</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line1994"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1995"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1996"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(bool)&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$types</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line1997"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line1998"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line1999"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line2000"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Generates&nbsp;the&nbsp;appropriate&nbsp;join&nbsp;SQL&nbsp;for&nbsp;the&nbsp;given&nbsp;join&nbsp;column.</span></span></code></li>
<li><a class="anchor" name="line2001"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2002"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$joinColumns&nbsp;The&nbsp;join&nbsp;columns&nbsp;definition&nbsp;of&nbsp;an&nbsp;association.</span></span></code></li>
<li><a class="anchor" name="line2003"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2004"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;LEFT&nbsp;JOIN&nbsp;if&nbsp;one&nbsp;of&nbsp;the&nbsp;columns&nbsp;is&nbsp;nullable,&nbsp;INNER&nbsp;JOIN&nbsp;otherwise.</span></span></code></li>
<li><a class="anchor" name="line2005"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line2006"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">getJoinSQLForJoinColumns</span><span style="color: #007700">(</span><span style="color: #0000BB">$joinColumns</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line2007"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2008"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;if&nbsp;one&nbsp;of&nbsp;the&nbsp;join&nbsp;columns&nbsp;is&nbsp;nullable,&nbsp;return&nbsp;left&nbsp;join</span></span></code></li>
<li><a class="anchor" name="line2009"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$joinColumns&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2010"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset(</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'nullable'</span><span style="color: #007700">])&nbsp;||&nbsp;</span><span style="color: #0000BB">$joinColumn</span><span style="color: #007700">[</span><span style="color: #DD0000">'nullable'</span><span style="color: #007700">])&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2011"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'LEFT&nbsp;JOIN'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line2012"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2013"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2014"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2015"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'INNER&nbsp;JOIN'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line2016"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2017"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2018"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line2019"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{@inheritdoc}</span></span></code></li>
<li><a class="anchor" name="line2020"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line2021"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getSQLColumnAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line2022"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2023"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteStrategy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnAlias</span><span style="color: #007700">(</span><span style="color: #0000BB">$columnName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlAliasCounter</span><span style="color: #007700">++,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">platform</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line2024"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2025"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2026"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line2027"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Generates&nbsp;the&nbsp;filter&nbsp;SQL&nbsp;for&nbsp;a&nbsp;given&nbsp;entity&nbsp;and&nbsp;table&nbsp;alias.</span></span></code></li>
<li><a class="anchor" name="line2028"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2029"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;ClassMetadata&nbsp;$targetEntity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metadata&nbsp;of&nbsp;the&nbsp;target&nbsp;entity.</span></span></code></li>
<li><a class="anchor" name="line2030"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$targetTableAlias&nbsp;The&nbsp;table&nbsp;alias&nbsp;of&nbsp;the&nbsp;joined/selected&nbsp;table.</span></span></code></li>
<li><a class="anchor" name="line2031"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2032"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;SQL&nbsp;query&nbsp;part&nbsp;to&nbsp;add&nbsp;to&nbsp;a&nbsp;query.</span></span></code></li>
<li><a class="anchor" name="line2033"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line2034"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">generateFilterConditionSQL</span><span style="color: #007700">(</span><span style="color: #0000BB">ClassMetadata&nbsp;$targetEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$targetTableAlias</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line2035"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2036"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$filterClauses&nbsp;</span><span style="color: #007700">=&nbsp;array();</span></span></code></li>
<li><a class="anchor" name="line2037"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2038"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">em</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilters</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getEnabledFilters</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$filter</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2039"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #DD0000">''&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">$filterExpr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$filter</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFilterConstraint</span><span style="color: #007700">(</span><span style="color: #0000BB">$targetEntity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$targetTableAlias</span><span style="color: #007700">))&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2040"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$filterClauses</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">'('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filterExpr&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">')'</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line2041"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2042"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2043"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2044"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;AND&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$filterClauses</span><span style="color: #007700">);</span></span></code></li>
<li><a class="anchor" name="line2045"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"("&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">")"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Wrap&nbsp;again&nbsp;to&nbsp;avoid&nbsp;"X&nbsp;or&nbsp;Y&nbsp;and&nbsp;FilterConditionSQL"</span></span></code></li>
<li><a class="anchor" name="line2046"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}</span></span></code></li>
<li><a class="anchor" name="line2047"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2048"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**</span></span></code></li>
<li><a class="anchor" name="line2049"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Switches&nbsp;persister&nbsp;context&nbsp;according&nbsp;to&nbsp;current&nbsp;query&nbsp;offset/limits</span></span></code></li>
<li><a class="anchor" name="line2050"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2051"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;to-many&nbsp;associations&nbsp;cannot&nbsp;be&nbsp;fetch-joined&nbsp;when&nbsp;a&nbsp;limit&nbsp;is&nbsp;involved</span></span></code></li>
<li><a class="anchor" name="line2052"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span></span></code></li>
<li><a class="anchor" name="line2053"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;null|int&nbsp;$offset</span></span></code></li>
<li><a class="anchor" name="line2054"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;null|int&nbsp;$limit</span></span></code></li>
<li><a class="anchor" name="line2055"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></span></code></li>
<li><a class="anchor" name="line2056"></a><code><span style="color: #FF8000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;function&nbsp;</span><span style="color: #0000BB">switchPersisterContext</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">)</span></span></code></li>
<li><a class="anchor" name="line2057"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2058"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$offset&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">)&nbsp;{</span></span></code></li>
<li><a class="anchor" name="line2059"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">noLimitsContext</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line2060"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2061"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></span></code></li>
<li><a class="anchor" name="line2062"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2063"></a><code><span style="color: #007700"></span></span></code></li>
<li><a class="anchor" name="line2064"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">currentPersisterContext&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limitsHandlingContext</span><span style="color: #007700">;</span></span></code></li>
<li><a class="anchor" name="line2065"></a><code><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></code></li>
<li><a class="anchor" name="line2066"></a><code><span style="color: #007700">}</span></span></code></li>
<li><a class="anchor" name="line2067"></a><code><span style="color: #007700"></span>
</span></code></li></ol>
</div>
    </body>
</html>
